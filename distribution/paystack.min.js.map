{"version":3,"sources":["../src/PayStack.js"],"names":[],"mappings":"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","file":"paystack.min.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PayStack extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttext: this.props.text || \"Make Payment 2000\",\r\n\t\t\tclass: this.props.class || \"\",\r\n\t\t\tmetadata: this.props.metadata || {},\r\n\t\t\tcurrency: this.props.currency || \"NGN\",\r\n\t\t\tplan: this.props.plan || \"\",\r\n\t\t\tquantity: this.props.quantity || \"\",\r\n\t\t\tsubaccount: this.props.subaccount || \"\",\r\n\t\t\ttransaction_charge: this.props.transaction_charge || 0,\r\n\t\t\tbearer: this.props.bearer || \"\",\r\n\t\t\tdisabled: this.props.disabled || false,\r\n\t\t\tdirectInitialization: this.props.directInitialization || true,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n        if (nextProps.disabled !== prevState.disabled) {\r\n\t\t\treturn {\r\n\t\t\t\tdisabled: nextProps.disabled, \r\n\t\t\t\tdirectInitialization: nextProps.directInitialization};\r\n        }\r\n        // Return null to indicate no change to state.\r\n        return null;\r\n    }\r\n\tcomponentDidMount() {\r\n\t\tif(this.props.embed){\r\n\t\t\tthis.payWithPaystack()\r\n\t\t}\r\n\t}\r\n\r\n\tpayWithPaystack = () => {\r\n\t\r\n\t\tlet paystackOptions = {\r\n\t\t\tkey: this.props.paystackkey,\r\n\t\t\temail: this.props.email,\r\n\t\t\tamount: this.props.amount,\r\n\t\t\tref: this.props.reference,\r\n\t\t\tmetadata: this.state.metadata,\r\n\t\t\tcallback: (response) => {\r\n\t\t\t\tthis.props.callback(response)\r\n\t\t\t},\r\n\t\t\tonClose: () => {\r\n\t\t\t\tthis.props.close()\r\n\t\t\t},\r\n\t\t\tcurrency: this.state.currency,\r\n\t\t\tplan: this.state.plan,\r\n\t\t\tquantity: this.state.quantity,\r\n\t\t\tsubaccount: this.state.subaccount,\r\n\t\t\ttransaction_charge: this.state.transaction_charge,\r\n\t\t\tbearer: this.state.bearer\r\n\t\t}\r\n\t\r\n\t\tif (this.props.embed) {\r\n\t\t\tpaystackOptions.container = \"paystackEmbedContainer\"\r\n\t\t}\r\n\t\tconst handler = window.PaystackPop.setup(paystackOptions);\r\n\t\tif (this.state.directInitialization)\r\n\t\t{\r\n\t\t\tif (!this.props.embed) {\r\n\t\t\t\t//console.log(\"am opening IFrame\");\r\n\t\t\t\thandler.openIframe();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.props.beforInitialization((response) => {\r\n\t\t\t\tif (response === undefined && response === null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (response.allowPayment === true)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.props.embed) {\r\n\t\t\t\t\t\thandler.openIframe();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet opacity = 1;\r\n\t\tif (this.state.disabled)\r\n\t\t{\r\n\t\t\topacity = 0.5;\r\n\t\t}\r\n\r\n\t\treturn this.props.embed ?\r\n\t\t\t(\r\n\t\t\t\t<div id=\"paystackEmbedContainer\"></div>\r\n\t\t\t)\r\n\t\t\t:\r\n\t\t\t(\r\n\t\t\t\t<span>\r\n          <button className={this.state.class} onClick={this.payWithPaystack} disabled={this.state.disabled} style={{opacity: opacity}}>\r\n            {this.state.text}\r\n          </button>\r\n        </span>\r\n\t\t\t)\r\n\t}\r\n}\r\n\r\nPayStack.propTypes = {\r\n\tembed: PropTypes.bool,\r\n\ttext: PropTypes.string,\r\n\tclass: PropTypes.string,\r\n\tmetadata: PropTypes.object,\r\n\tcurrency: PropTypes.string,\r\n\tplan: PropTypes.string,\r\n\tquantity: PropTypes.string,\r\n\tsubaccount: PropTypes.string,\r\n\ttransaction_charge: PropTypes.number,\r\n\tbearer: PropTypes.string,\r\n\treference: PropTypes.string.isRequired,\r\n\temail: PropTypes.string.isRequired,\r\n\tamount: PropTypes.number.isRequired, //in kobo\r\n\tpaystackkey: PropTypes.string.isRequired,\r\n\tcallback: PropTypes.func.isRequired,\r\n\tbeforInitialization: PropTypes.func,\r\n\tdirectInitialization: PropTypes.bool,\r\n\tclose: PropTypes.func.isRequired,\r\n\tdisabled: PropTypes.bool\r\n}\r\n\r\nexport default PayStack;\r\n"]}