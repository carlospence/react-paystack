{"version":3,"sources":["../src/PayStack.js"],"names":["PayStack","props","payWithPaystack","paystackOptions","key","paystackkey","email","amount","ref","reference","metadata","state","callback","response","onClose","close","currency","plan","quantity","subaccount","transaction_charge","bearer","embed","container","handler","window","PaystackPop","setup","directInitialization","openIframe","beforInitialization","undefined","allowPayment","text","class","disabled","opacity","nextProps","prevState","Component","propTypes","PropTypes","bool","string","object","number","isRequired","func"],"mappings":"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","file":"PayStack.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PayStack extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttext: this.props.text || \"Make Payment 2000\",\r\n\t\t\tclass: this.props.class || \"\",\r\n\t\t\tmetadata: this.props.metadata || {},\r\n\t\t\tcurrency: this.props.currency || \"NGN\",\r\n\t\t\tplan: this.props.plan || \"\",\r\n\t\t\tquantity: this.props.quantity || \"\",\r\n\t\t\tsubaccount: this.props.subaccount || \"\",\r\n\t\t\ttransaction_charge: this.props.transaction_charge || 0,\r\n\t\t\tbearer: this.props.bearer || \"\",\r\n\t\t\tdisabled: this.props.disabled || false,\r\n\t\t\tdirectInitialization: this.props.directInitialization || true,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n        if (nextProps.disabled !== prevState.disabled) {\r\n\t\t\treturn {\r\n\t\t\t\tdisabled: nextProps.disabled, \r\n\t\t\t\tdirectInitialization: nextProps.directInitialization};\r\n        }\r\n        // Return null to indicate no change to state.\r\n        return null;\r\n    }\r\n\tcomponentDidMount() {\r\n\t\tif(this.props.embed){\r\n\t\t\tthis.payWithPaystack()\r\n\t\t}\r\n\t}\r\n\r\n\tpayWithPaystack = () => {\r\n\t\r\n\t\tlet paystackOptions = {\r\n\t\t\tkey: this.props.paystackkey,\r\n\t\t\temail: this.props.email,\r\n\t\t\tamount: this.props.amount,\r\n\t\t\tref: this.props.reference,\r\n\t\t\tmetadata: this.state.metadata,\r\n\t\t\tcallback: (response) => {\r\n\t\t\t\tthis.props.callback(response)\r\n\t\t\t},\r\n\t\t\tonClose: () => {\r\n\t\t\t\tthis.props.close()\r\n\t\t\t},\r\n\t\t\tcurrency: this.state.currency,\r\n\t\t\tplan: this.state.plan,\r\n\t\t\tquantity: this.state.quantity,\r\n\t\t\tsubaccount: this.state.subaccount,\r\n\t\t\ttransaction_charge: this.state.transaction_charge,\r\n\t\t\tbearer: this.state.bearer\r\n\t\t}\r\n\t\r\n\t\tif (this.props.embed) {\r\n\t\t\tpaystackOptions.container = \"paystackEmbedContainer\"\r\n\t\t}\r\n\t\tconst handler = window.PaystackPop.setup(paystackOptions);\r\n\t\tif (this.state.directInitialization)\r\n\t\t{\r\n\t\t\tif (!this.props.embed) {\r\n\t\t\t\t//console.log(\"am opening IFrame\");\r\n\t\t\t\thandler.openIframe();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.props.beforInitialization((response) => {\r\n\t\t\t\tif (response === undefined && response === null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (response.allowPayment === true)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.props.embed) {\r\n\t\t\t\t\t\thandler.openIframe();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet opacity = 1;\r\n\t\tif (this.state.disabled)\r\n\t\t{\r\n\t\t\topacity = 0.5;\r\n\t\t}\r\n\r\n\t\treturn this.props.embed ?\r\n\t\t\t(\r\n\t\t\t\t<div id=\"paystackEmbedContainer\"></div>\r\n\t\t\t)\r\n\t\t\t:\r\n\t\t\t(\r\n\t\t\t\t<span>\r\n          <button className={this.state.class} onClick={this.payWithPaystack} disabled={this.state.disabled} style={{opacity: opacity}}>\r\n            {this.state.text}\r\n          </button>\r\n        </span>\r\n\t\t\t)\r\n\t}\r\n}\r\n\r\nPayStack.propTypes = {\r\n\tembed: PropTypes.bool,\r\n\ttext: PropTypes.string,\r\n\tclass: PropTypes.string,\r\n\tmetadata: PropTypes.object,\r\n\tcurrency: PropTypes.string,\r\n\tplan: PropTypes.string,\r\n\tquantity: PropTypes.string,\r\n\tsubaccount: PropTypes.string,\r\n\ttransaction_charge: PropTypes.number,\r\n\tbearer: PropTypes.string,\r\n\treference: PropTypes.string.isRequired,\r\n\temail: PropTypes.string.isRequired,\r\n\tamount: PropTypes.number.isRequired, //in kobo\r\n\tpaystackkey: PropTypes.string.isRequired,\r\n\tcallback: PropTypes.func.isRequired,\r\n\tbeforInitialization: PropTypes.func,\r\n\tdirectInitialization: PropTypes.bool,\r\n\tclose: PropTypes.func.isRequired,\r\n\tdisabled: PropTypes.bool\r\n}\r\n\r\nexport default PayStack;\r\n"]}